<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <meta name="google-site-verification" content="CTNRh5UnDIRoCt3a_gbyb1X9SaQXOXtmeXUne82M_TM" />
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Using Celery with Django for Asynchronous Tasks | Taha Portfolio</title>
  <link rel = 'canonical' href = '/posts/django-celery-2024/'>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Using Celery with Django for Asynchronous Tasks" />
<meta property="og:description" content="Introduction Celery is a powerful, distributed task queue that can be used with Django to handle asynchronous tasks and background processing. This guide will walk you through setting up Celery with Django and demonstrate how to use it effectively in your projects.
Table of Contents Installation Configuration Creating Tasks Running Tasks Periodic Tasks Monitoring Best Practices Installation First, you need to install Celery and its dependencies:
pip install celery redis django-celery-results We&rsquo;ll use Redis as our message broker, but you can also use RabbitMQ or other brokers supported by Celery." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/django-celery-2024/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-08-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-08-05T00:00:00+00:00" />


  <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Using Celery with Django for Asynchronous Tasks"/>
<meta name="twitter:description" content="Introduction Celery is a powerful, distributed task queue that can be used with Django to handle asynchronous tasks and background processing. This guide will walk you through setting up Celery with Django and demonstrate how to use it effectively in your projects.
Table of Contents Installation Configuration Creating Tasks Running Tasks Periodic Tasks Monitoring Best Practices Installation First, you need to install Celery and its dependencies:
pip install celery redis django-celery-results We&rsquo;ll use Redis as our message broker, but you can also use RabbitMQ or other brokers supported by Celery."/>

  
  
  
  <link rel="stylesheet" href="/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css" integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="/images/favicon.ico" />

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/about">About</a></li>
         
        <li><a href="/tags">Tags</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" /posts/gin-2024/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="/about/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2fdjango-celery-2024%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2fdjango-celery-2024%2f&text=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2fdjango-celery-2024%2f&title=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fdjango-celery-2024%2f&is_video=false&description=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks&body=Check out this article: %2fposts%2fdjango-celery-2024%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2fdjango-celery-2024%2f&title=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2fdjango-celery-2024%2f&title=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2fdjango-celery-2024%2f&name=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks&description=Introduction%20Celery%20is%20a%20powerful%2c%20distributed%20task%20queue%20that%20can%20be%20used%20with%20Django%20to%20handle%20asynchronous%20tasks%20and%20background%20processing.%20This%20guide%20will%20walk%20you%20through%20setting%20up%20Celery%20with%20Django%20and%20demonstrate%20how%20to%20use%20it%20effectively%20in%20your%20projects.%0aTable%20of%20Contents%20Installation%20Configuration%20Creating%20Tasks%20Running%20Tasks%20Periodic%20Tasks%20Monitoring%20Best%20Practices%20Installation%20First%2c%20you%20need%20to%20install%20Celery%20and%20its%20dependencies%3a%0apip%20install%20celery%20redis%20django-celery-results%20We%26rsquo%3bll%20use%20Redis%20as%20our%20message%20broker%2c%20but%20you%20can%20also%20use%20RabbitMQ%20or%20other%20brokers%20supported%20by%20Celery." aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2fdjango-celery-2024%2f&t=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#table-of-contents">Table of Contents</a></li>
    <li><a href="#installation">Installation</a></li>
    <li><a href="#configuration">Configuration</a>
      <ul>
        <li><a href="#django-settings">Django Settings</a></li>
        <li><a href="#celery-configuration">Celery Configuration</a></li>
      </ul>
    </li>
    <li><a href="#creating-tasks">Creating Tasks</a></li>
    <li><a href="#running-tasks">Running Tasks</a></li>
    <li><a href="#periodic-tasks">Periodic Tasks</a></li>
    <li><a href="#monitoring">Monitoring</a></li>
    <li><a href="#best-practices">Best Practices</a></li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Using Celery with Django for Asynchronous Tasks
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2024-08-05 00:00:00 &#43;0000 UTC" itemprop="datePublished">2024-08-05</time>
          
        </div>
        
        
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/python" rel="tag">Python</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <h2 id="introduction">Introduction</h2>
<p>Celery is a powerful, distributed task queue that can be used with Django to handle asynchronous tasks and background processing. This guide will walk you through setting up Celery with Django and demonstrate how to use it effectively in your projects.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#installation">Installation</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#creating-tasks">Creating Tasks</a></li>
<li><a href="#running-tasks">Running Tasks</a></li>
<li><a href="#periodic-tasks">Periodic Tasks</a></li>
<li><a href="#monitoring">Monitoring</a></li>
<li><a href="#best-practices">Best Practices</a></li>
</ol>
<h2 id="installation">Installation</h2>
<p>First, you need to install Celery and its dependencies:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip install celery redis django-celery-results
</span></span></code></pre></div><p>We&rsquo;ll use Redis as our message broker, but you can also use RabbitMQ or other brokers supported by Celery.</p>
<h2 id="configuration">Configuration</h2>
<h3 id="django-settings">Django Settings</h3>
<p>Add the following to your Django <code>settings.py</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Celery settings</span>
</span></span><span style="display:flex;"><span>CELERY_BROKER_URL <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;redis://localhost:6379&#39;</span>
</span></span><span style="display:flex;"><span>CELERY_RESULT_BACKEND <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;django-db&#39;</span>
</span></span><span style="display:flex;"><span>CELERY_ACCEPT_CONTENT <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;application/json&#39;</span>]
</span></span><span style="display:flex;"><span>CELERY_RESULT_SERIALIZER <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;json&#39;</span>
</span></span><span style="display:flex;"><span>CELERY_TASK_SERIALIZER <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;json&#39;</span>
</span></span><span style="display:flex;"><span>CELERY_TIMEZONE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;UTC&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add django_celery_results to INSTALLED_APPS</span>
</span></span><span style="display:flex;"><span>INSTALLED_APPS <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;django_celery_results&#39;</span>,
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><h3 id="celery-configuration">Celery Configuration</h3>
<p>Create a new file <code>celery.py</code> in your Django project directory (where <code>settings.py</code> is located):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> celery <span style="color:#f92672">import</span> Celery
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set the default Django settings module for the &#39;celery&#39; program.</span>
</span></span><span style="display:flex;"><span>os<span style="color:#f92672">.</span>environ<span style="color:#f92672">.</span>setdefault(<span style="color:#e6db74">&#39;DJANGO_SETTINGS_MODULE&#39;</span>, <span style="color:#e6db74">&#39;your_project.settings&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app <span style="color:#f92672">=</span> Celery(<span style="color:#e6db74">&#39;your_project&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use a string here to make sure the worker doesn&#39;t serialize the object.</span>
</span></span><span style="display:flex;"><span>app<span style="color:#f92672">.</span>config_from_object(<span style="color:#e6db74">&#39;django.conf:settings&#39;</span>, namespace<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;CELERY&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Load task modules from all registered Django app configs.</span>
</span></span><span style="display:flex;"><span>app<span style="color:#f92672">.</span>autodiscover_tasks()
</span></span></code></pre></div><p>Update your project&rsquo;s <code>__init__.py</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> .celery <span style="color:#f92672">import</span> app <span style="color:#66d9ef">as</span> celery_app
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>__all__ <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;celery_app&#39;</span>,)
</span></span></code></pre></div><h2 id="creating-tasks">Creating Tasks</h2>
<p>Create a <code>tasks.py</code> file in your Django app directory:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> celery <span style="color:#f92672">import</span> shared_task
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@shared_task</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(x, y):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> x <span style="color:#f92672">+</span> y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@shared_task</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">multiply</span>(x, y):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> x <span style="color:#f92672">*</span> y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@shared_task</span>(bind<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">debug_task</span>(self):
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;Request: </span><span style="color:#e6db74">{</span>self<span style="color:#f92672">.</span>request<span style="color:#e6db74">!r}</span><span style="color:#e6db74">&#39;</span>)
</span></span></code></pre></div><h2 id="running-tasks">Running Tasks</h2>
<p>You can run tasks in your Django views or anywhere else in your Django code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> django.http <span style="color:#f92672">import</span> HttpResponse
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .tasks <span style="color:#f92672">import</span> add, multiply
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">index</span>(request):
</span></span><span style="display:flex;"><span>    add<span style="color:#f92672">.</span>delay(<span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>)
</span></span><span style="display:flex;"><span>    multiply<span style="color:#f92672">.</span>delay(<span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> HttpResponse(<span style="color:#e6db74">&#34;Tasks are running in the background!&#34;</span>)
</span></span></code></pre></div><p>The <code>delay()</code> method is used to execute the task asynchronously.</p>
<h2 id="periodic-tasks">Periodic Tasks</h2>
<p>To set up periodic tasks, you can use Celery Beat. First, install the Django Celery Beat package:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip install django-celery-beat
</span></span></code></pre></div><p>Add it to your <code>INSTALLED_APPS</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>INSTALLED_APPS <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;django_celery_beat&#39;</span>,
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>Then, you can define periodic tasks in your Django admin interface or in your code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> celery.schedules <span style="color:#f92672">import</span> crontab
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.conf <span style="color:#f92672">import</span> settings
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>settings<span style="color:#f92672">.</span>CELERY_BEAT_SCHEDULE <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;add-every-minute-contrab&#39;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;task&#39;</span>: <span style="color:#e6db74">&#39;your_app.tasks.add&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;schedule&#39;</span>: crontab(minute<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;*/1&#39;</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;args&#39;</span>: (<span style="color:#ae81ff">16</span>, <span style="color:#ae81ff">16</span>),
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="monitoring">Monitoring</h2>
<p>You can use Flower, a web-based tool for monitoring Celery:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip install flower
</span></span><span style="display:flex;"><span>celery -A your_project flower
</span></span></code></pre></div><p>Then visit <code>http://localhost:5555</code> to see the Flower dashboard.</p>
<h2 id="best-practices">Best Practices</h2>
<ol>
<li>
<p><strong>Use <code>shared_task</code> decorator</strong>: This allows your tasks to be used by multiple apps.</p>
</li>
<li>
<p><strong>Handle exceptions</strong>: Wrap your task logic in try-except blocks to handle errors gracefully.</p>
</li>
<li>
<p><strong>Set timeouts</strong>: Use the <code>soft_time_limit</code> and <code>time_limit</code> options to prevent tasks from running indefinitely.</p>
</li>
<li>
<p><strong>Use task states</strong>: Update task states to track progress and provide feedback.</p>
</li>
<li>
<p><strong>Use task priority</strong>: Set task priorities to ensure critical tasks are processed first.</p>
</li>
<li>
<p><strong>Optimize database queries</strong>: Ensure your tasks are not causing N+1 query problems.</p>
</li>
<li>
<p><strong>Use task queues</strong>: Separate your tasks into different queues based on their nature (e.g., email queue, data processing queue).</p>
</li>
</ol>
<p>Example of a more robust task:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> celery <span style="color:#f92672">import</span> shared_task
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> celery.utils.log <span style="color:#f92672">import</span> get_task_logger
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.core.mail <span style="color:#f92672">import</span> send_mail
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>logger <span style="color:#f92672">=</span> get_task_logger(__name__)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@shared_task</span>(bind<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, max_retries<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>, soft_time_limit<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">send_notification_email</span>(self, user_id, subject, message):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        user <span style="color:#f92672">=</span> User<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(id<span style="color:#f92672">=</span>user_id)
</span></span><span style="display:flex;"><span>        send_mail(
</span></span><span style="display:flex;"><span>            subject,
</span></span><span style="display:flex;"><span>            message,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;from@example.com&#39;</span>,
</span></span><span style="display:flex;"><span>            [user<span style="color:#f92672">.</span>email],
</span></span><span style="display:flex;"><span>            fail_silently<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>,
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> User<span style="color:#f92672">.</span>DoesNotExist:
</span></span><span style="display:flex;"><span>        logger<span style="color:#f92672">.</span>error(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;User with id </span><span style="color:#e6db74">{</span>user_id<span style="color:#e6db74">}</span><span style="color:#e6db74"> does not exist&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> exc:
</span></span><span style="display:flex;"><span>        logger<span style="color:#f92672">.</span>error(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Error sending email to user </span><span style="color:#e6db74">{</span>user_id<span style="color:#e6db74">}</span><span style="color:#e6db74">: </span><span style="color:#e6db74">{</span>exc<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> self<span style="color:#f92672">.</span>retry(exc<span style="color:#f92672">=</span>exc, countdown<span style="color:#f92672">=</span><span style="color:#ae81ff">60</span>)  <span style="color:#75715e"># Retry after 1 minute</span>
</span></span></code></pre></div>
    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about">About</a></li>
         
          <li><a href="/tags">Tags</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#table-of-contents">Table of Contents</a></li>
    <li><a href="#installation">Installation</a></li>
    <li><a href="#configuration">Configuration</a>
      <ul>
        <li><a href="#django-settings">Django Settings</a></li>
        <li><a href="#celery-configuration">Celery Configuration</a></li>
      </ul>
    </li>
    <li><a href="#creating-tasks">Creating Tasks</a></li>
    <li><a href="#running-tasks">Running Tasks</a></li>
    <li><a href="#periodic-tasks">Periodic Tasks</a></li>
    <li><a href="#monitoring">Monitoring</a></li>
    <li><a href="#best-practices">Best Practices</a></li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2fdjango-celery-2024%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2fdjango-celery-2024%2f&text=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2fdjango-celery-2024%2f&title=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fdjango-celery-2024%2f&is_video=false&description=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks&body=Check out this article: %2fposts%2fdjango-celery-2024%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2fdjango-celery-2024%2f&title=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2fdjango-celery-2024%2f&title=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2fdjango-celery-2024%2f&name=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks&description=Introduction%20Celery%20is%20a%20powerful%2c%20distributed%20task%20queue%20that%20can%20be%20used%20with%20Django%20to%20handle%20asynchronous%20tasks%20and%20background%20processing.%20This%20guide%20will%20walk%20you%20through%20setting%20up%20Celery%20with%20Django%20and%20demonstrate%20how%20to%20use%20it%20effectively%20in%20your%20projects.%0aTable%20of%20Contents%20Installation%20Configuration%20Creating%20Tasks%20Running%20Tasks%20Periodic%20Tasks%20Monitoring%20Best%20Practices%20Installation%20First%2c%20you%20need%20to%20install%20Celery%20and%20its%20dependencies%3a%0apip%20install%20celery%20redis%20django-celery-results%20We%26rsquo%3bll%20use%20Redis%20as%20our%20message%20broker%2c%20but%20you%20can%20also%20use%20RabbitMQ%20or%20other%20brokers%20supported%20by%20Celery." aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2fdjango-celery-2024%2f&t=Using%20Celery%20with%20Django%20for%20Asynchronous%20Tasks" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2024  Taha Portfolio 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/about">About</a></li>
         
        <li><a href="/tags">Tags</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
